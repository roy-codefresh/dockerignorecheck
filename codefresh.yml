version: '1.0'
steps:
  build:
    title: Building Docker Image
    type: build
    image_name: roycodefresh/dockerignorecheck
    tag: latest
    working_directory: ./
    dockerfile: Dockerfile
  embedded:
    title: 'Embedded compoistion in the codefresh.yml file'
    type: composition
    composition:
      version: '2'
      services:
        redis:
          image: redis
    composition_candidates:
      test:
        image: ${{build}}
        command: ping redis -c 4
  system:
    title: 'Compoistion from the codefresh system'
    type: composition
    composition: CompositionTest
    composition_candidates:
      test:
        image: ${{build}}
        command:
          - sh
          - -c
          - 'curl hello-world:3000'
  system_with_service_replacemenbt:
    title: 'Compoistion from the codefresh system with service replacement'
    type: composition
    composition: CompositionTest
    composition_candidates:
      proxy:
        image: ${{build}}
        command:
          - sh
          - -c
          - 'curl hello-world:3000'
        
