version: '1.0'
steps:
  build:
    title: Building Docker Image
    type: build
    image_name: roycodefresh/dockerignorecheck
    working_directory: ./
    dockerfile: Dockerfile
  push1:
    type: push
    title: Standard push to registry1
    provider: docker
    registry: 192.168.99.100:5001
    tag: master
    candidate: ${{build}}
  push2:
    type: push
    title: Standard push to registry2
    provider: docker
    registry: 192.168.99.100:5002
    tag: hello-world
    candidate: ${{build}}
  ecr:
    type: push
    title: Standard push to amazon ECR
    provider: docker
    registry: 839151377425.dkr.ecr.us-east-1.amazonaws.com
    tag: roycheck:hello-world
    candidate: ${{build}}
#  push:
#    type: push
#    title: ECR push
#    description: Free text description
#    candidate: ${{build_step_name}}
#    provider: ecr
#    tag: latest
#    accessKeyId: ${{AWS_ACCESS_KEY}}
#    secretAccessKey: ${{AWS_SECRET}}
#    region: eu-central-1
